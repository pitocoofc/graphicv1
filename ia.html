<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA Studio - Vers√µes</title>
    <style>
        :root { --bg: #0d0d0d; --panel: #1a1a1a; --accent: #9c27b0; --text: #e0e0e0; }
        body { margin: 0; background: var(--bg); font-family: 'Segoe UI', sans-serif; color: var(--text); display: flex; height: 100vh; }
        
        #ai-container { flex: 1; display: flex; flex-direction: column; max-width: 800px; margin: 0 auto; border-left: 1px solid #333; border-right: 1px solid #333; }
        
        .header { padding: 15px 20px; background: var(--panel); border-bottom: 2px solid var(--accent); display: flex; justify-content: space-between; align-items: center; gap: 10px; }
        .version-info { display: flex; flex-direction: column; }
        .header h2 { margin: 0; font-size: 16px; color: var(--accent); display: flex; align-items: center; gap: 8px; }
        
        /* Seletor de Vers√£o */
        #version-selector { background: #000; color: #fff; border: 1px solid var(--accent); border-radius: 5px; padding: 2px 5px; font-size: 12px; outline: none; cursor: pointer; }

        .back-btn { background: none; border: 1px solid var(--accent); color: var(--accent); padding: 5px 12px; border-radius: 20px; cursor: pointer; font-size: 11px; }

        #chat-window { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { max-width: 80%; padding: 12px; border-radius: 12px; font-size: 14px; line-height: 1.5; position: relative; }
        .msg.user { align-self: flex-end; background: var(--accent); color: white; border-bottom-right-radius: 2px; }
        .msg.bot { align-self: flex-start; background: #252526; border: 1px solid #333; border-bottom-left-radius: 2px; }

        .input-area { padding: 20px; background: var(--panel); display: flex; gap: 10px; }
        input { flex: 1; background: #000; border: 1px solid #444; color: white; padding: 12px; border-radius: 8px; outline: none; }
        button#send { background: var(--accent); border: none; color: white; padding: 0 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }

        pre { background: #000; padding: 10px; border-radius: 5px; overflow-x: auto; color: #4fc3f7; border: 1px solid #333; font-family: monospace; }
        .badge { font-size: 10px; color: #888; margin-top: 4px; display: block; }
    </style>
</head>
<body>

<div id="ai-container">
    <div class="header">
        <div class="version-info">
            <h2>ü§ñ NEXOS IA 
                <select id="version-selector" onchange="changeVersion()">
                    <option value="0.1">v0.1 - Scripters</option>
                    <option value="0.5">v0.5 - Bate-papo</option>
                </select>
            </h2>
            <span id="current-mode" class="badge">Modo Atual: Programa√ß√£o Direta</span>
        </div>
        <button class="back-btn" onclick="window.history.back()">VOLTAR AO EDITOR</button>
    </div>

    <div id="chat-window">
        <div class="msg bot" id="welcome-msg">Ol√°! Estou no modo v0.1 (Scripters). Pe√ßa scripts de rota√ß√£o, pulo ou configura√ß√£o de c√©u!</div>
    </div>

    <div class="input-area">
        <input type="text" id="user-input" placeholder="Digite seu comando...">
        <button id="send" onclick="sendMessage()">ENVIAR</button>
    </div>
</div>

<script type="module">
    // Importamos o brain para a vers√£o 0.5
    import brain from './brain.js';

    const chat = document.getElementById('chat-window');
    const input = document.getElementById('user-input');
    const selector = document.getElementById('version-selector');
    const modeText = document.getElementById('current-mode');

    // Tornar a fun√ß√£o global para o bot√£o onclick funcionar com type="module"
    window.sendMessage = function() {
        const text = input.value;
        const version = selector.value;
        if(!text) return;

        addMsg(text, 'user');
        input.value = "";

        setTimeout(() => {
            let response = "";

            if (version === "0.1") {
                // --- L√ìGICA v0.1 (SCRIPTERS) ---
                response = "Interessante! Posso te ajudar com scripts b√°sicos.";
                let lowText = text.toLowerCase();
                
                if(lowText.includes("girar")) {
                    response = "Aqui est√° um script de rota√ß√£o no eixo Y:<br><pre>-- Script de Rota√ß√£o\nfunction update() {\n  this.rotation.y += 0.02;\n}</pre>";
                } else if(lowText.includes("ceu") || lowText.includes("sky")) {
                    response = "Para mudar o c√©u, selecione o objeto 'Sky' e mude a propriedade Texture!";
                }
            } else {
                // --- L√ìGICA v0.5 (BATE-PAPO via brain.js) ---
                response = "Ainda n√£o aprendi sobre isso no modo Bate-papo.";
                let lowText = text.toLowerCase();
                for (let item of brain) {
                    if (item.inputs.some(k => lowText.includes(k))) {
                        response = item.outputs[Math.floor(Math.random() * item.outputs.length)];
                        break;
                    }
                }
            }

            addMsg(response, 'bot');
        }, 600);
    }

    window.changeVersion = function() {
        const v = selector.value;
        if(v === "0.1") {
            modeText.innerText = "Modo Atual: Programa√ß√£o Direta";
            addMsg("Alterado para v0.1 - Scripters. Foco em l√≥gica de jogo.", "bot");
        } else {
            modeText.innerText = "Modo Atual: Conversa & Ideias";
            addMsg("Alterado para v0.5 - Bate-papo. Agora usamos o dicion√°rio expandido.", "bot");
        }
    }

    function addMsg(text, type) {
        const div = document.createElement('div');
        div.className = `msg ${type}`;
        div.innerHTML = text;
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }

    input.addEventListener("keypress", (e) => { if(e.key === "Enter") sendMessage(); });
</script>

</body>
</html>
